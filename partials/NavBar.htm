description = "Navigation Bar"

[viewBag]

[staticMenu]
code = "frontend-menu"

[ProductCategory]
==
{% set producer_categories = null %}

<div class="d-flex justify-content-between justify-content-sm-between shadow-md nav navbar fixed-top flex-row">
    <div class="navbar-overlay"></div>

    <div class="d-flex flex-grow-1 flex-md-grow-0 py-4 px-3 align-items-center justify-content-between ">
        <a class="mx-3 d-sm-flex d-lg-none text-dark" href="#flametree-side-drawer">
            <i class="fas fa-bars fa-1x"></i>
        </a>
        <a href="#" class="button nav-item-link mx-auto mx-md-3">
            <img src="{{ 'assets/images/logo.jpg' | theme }}" class="logo mx-md-3 "/>
        </a>
    </div>
    <div class="d-lg-flex flex-row justify-content-end mx-5 d-none align-items-baseline">
        {% if staticMenu.menuItems %}
            {% for item in staticMenu.menuItems %}
                {% if not isHidden %}
                    {% if item.title is same as("Producers") %}
                        {% set producer_categories = item.items %}

                        <div class="nav-item py-4 px-3 {{ (item.items ) ? 'nav-dropdown' : null }}"
                         @mouseleave="deactivateMegaMenu()"
                         @mouseenter="activateMegaMenu()">
                        <a class="nav-item-link" href="{{ item.url | app }}">{{ item.title }}</a>

                        {% if item.items and item.title != "Producers" %}
                            <div class="nav-dropdown-menu  flex-column" >
                                {% for dropdownItem in item.items %}
                                    <a href="{{ dropdownItem.url }}" class="nav-item-dropdown-menu-item px-3  py-3">
                                        {{ dropdownItem.title }}
                                    </a>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    {% else %}
                        <div class=" nav-item py-4 px-3 {{ (item.items ) ? 'nav-dropdown' : null }}">
                            <a class="nav-item-link" href="{{ item.url | app }}">{{ item.title }}</a>

                            {% if item.items and item.title != "Producers" %}
                                <div class="nav-dropdown-menu  flex-column">
                                    {% for dropdownItem in item.items %}
                                        <a href="{{ dropdownItem.url }}" class="nav-item-dropdown-menu-item px-3  py-3">
                                            {{ dropdownItem.title }}
                                        </a>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>

                    {% endif %}


                    {% endif %}
                {% endfor %}
            {% endif %}
        </div>
    </div>

{% if producer_categories %}
    <div :class='(!megaMenuState) ? "d-none" : "d-flex" '
          @mouseleave="deactivateMegaMenu()"
          @mouseenter="activateMegaMenu()">

        <mega-menu>
            {%  for index, producer_category in producer_categories %}
                <sidebar-menu-item key="{{ index}}" title="{{ producer_category.title }}" link="{{ "/products/#"~producer_category.title  }}">
                    {%  if producer_category.items %}
                        {%  for producer in producer_category.items %}
                            <menu-item
                                leading-icon="fas fa-chevron-circle-right"
                                parent="{{ producer_category.title }}"
                                title="{{ producer.title }}"
                                description="{{ producer.viewBag.origin }}"
                                icon="fas fa-map-marker-alt fa-2x"
                            >
                            </menu-item>

                        {% endfor %}
                    {%  endif %}
                </sidebar-menu-item>
            {%  endfor %}

        </mega-menu>
    </div>

{% endif %}

<div id="flametree-side-drawer" class="d-none" >
    {% if staticMenu.menuItems %}
        <ul class="mm-listview" >
            {% for item in staticMenu.menuItems %}
                {% if not isHidden %}

                    {% if item.title is same as("Producers") %}
                        {%  set producer_category = item.items %}
                        <li>
                            <a href="#">Producers</a>
                            <ul>
                                {% for category in producer_category %}

                                    <li>
                                        <a href="#">{{ category.title }}</a>
                                        <ul>
                                            {% for producer in category.items %}
                                                <a class="d-flex flex-column justify-content-start" href="{{ producer.url | default(category.url) }}">
                                                        <span>{{ producer.title }}</span>
                                                        <span> <i class="fas fa-map-marker-alt mx-2"></i>{{ producer.viewBag.origin }}</span>
                                                </a>
                                            {% endfor %}
                                        </ul>
                                    </li>
                                {% endfor %}
                            </ul>
                        </li>
                    {% else %}
                        <li>
                            <a href="{{ item.url }}">
                                {{ item.title }}
                            </a>
                            {% if item.items and item.title is not same as("Producers") %}
                                <ul>
                                    {% for dropdownItem in item.items %}
                                        <li>
                                            <a href="{{ dropdownItem.url }}">
                                                {{ dropdownItem.title }}
                                            </a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </li>
                    {% endif %}

                {% endif %}
            {% endfor %}
        </ul>
    {% endif %}
</div>
